# импортируем библиотеку "math"
import math


# Создадим функцию entropy, которая будет вычислять энтропию источника дискретных сообщений:
def entropy(p):
    return -sum([p[i] * math.log2(p[i]) for i in range(len(p))])


"""
Функция entropy принимает на вход список вероятностей событий и возвращает значение энтропии.
Для определения количества информации в введенном с клавиатуры сообщении
"""


# создадим функцию information, которая будет принимать на вход сообщение и источник информации,
# а затем вычислять количество информации:

def information(message, source):
    return math.log2(source) - math.log2(message)


"""
Функция information принимает на вход сообщение и источник информации, а затем вычисляет количество информации.
"""


# Для определения избыточности источника сообщений, создадим функцию redundancy,
# которая будет принимать на вход значение энтропии и количество информации в сообщении,
# а затем вычислять избыточность:

def redundancy(H, I):
    return 1 - (I / H)
"""
Функция redundancy принимает на вход значение энтропии и количество информации в сообщении,
 а затем вычисляет избыточность.
"""


# Наконец, создадим основную функцию,
# которая будет запрашивать у пользователя ввод сообщения и выводить все необходимые результаты:


def main():
    source = 10000  # количество возможных значений счетчика воды
    message = input("Введите сообщение: ")
    p = [message.count(c) / len(message) for c in set(message)]
    H = entropy(p)
    I = information(len(message), source)
    R = redundancy(H, I)
    print("Энтропия источника: {:.2f} бит".format(H))
    print("Количество информации в сообщении: {:.2f} бит".format(I))
    print("Избыточность источника: {:.2%}".format(R))


# Запуск программы

if __name__ == "__main__":
    main()
